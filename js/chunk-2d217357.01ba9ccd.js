(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217357"],{c66d:function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-tabs",{attrs:{vertical:""}},[t("v-tab",{staticStyle:{width:"200px"}},[a._v(" 個人資訊 ")]),t("v-tab",[a._v(" 修改密碼 ")]),t("v-tab",[a._v(" 修改暱稱 ")]),t("v-tab-item",{attrs:{transition:"fade-transition","reverse-transition":"fade-transition"}},[t("v-container",{staticClass:"mx-8"},a._l(a.info,(function(e){return t("v-row",{key:e.title,staticClass:"my-n4",attrs:{align:"center"}},[t("v-col",{attrs:{cols:"3"}},[t("div",{staticClass:"primary--text font-weight-bold",attrs:{justify:"center"}},[a._v(" "+a._s(e.title)+" ")])]),t("v-col",{attrs:{cols:"9"}},[t("v-text-field",{attrs:{value:e.content,readonly:""}})],1)],1)})),1)],1),t("v-tab-item",{attrs:{transition:"fade-transition","reverse-transition":"fade-transition"}},[t("v-card",{attrs:{tile:"",elevation:"0"}},[t("v-form",{ref:"passwordForm",staticClass:"pa-5",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),a.changePassword.apply(null,arguments)}},model:{value:a.passwordForm,callback:function(e){a.passwordForm=e},expression:"passwordForm"}},[t("v-text-field",{attrs:{label:"Current Password","append-icon":a.showPassword.oldPassword?"mdi-eye":"mdi-eye-off",type:a.showPassword.oldPassword?"text":"password",rules:[function(a){return!!a||"Please enter current password."}],outlined:""},on:{"click:append":function(e){a.showPassword.oldPassword=!a.showPassword.oldPassword}},model:{value:a.password.oldPassword,callback:function(e){a.$set(a.password,"oldPassword",e)},expression:"password.oldPassword"}}),t("v-text-field",{attrs:{label:"New Password","append-icon":a.showPassword.newPassword?"mdi-eye":"mdi-eye-off",type:a.showPassword.newPassword?"text":"password",rules:[function(a){return!!a||"Please enter new password."}],outlined:""},on:{"click:append":function(e){a.showPassword.newPassword=!a.showPassword.newPassword}},model:{value:a.password.newPassword,callback:function(e){a.$set(a.password,"newPassword",e)},expression:"password.newPassword"}}),t("v-text-field",{attrs:{label:"Confirm New Password","append-icon":a.showPassword.confirm?"mdi-eye":"mdi-eye-off",type:a.showPassword.confirm?"text":"password",rules:[function(e){return!!e&&e===a.password.newPassword||"You should enter the same password with the new one."}],outlined:""},on:{"click:append":function(e){a.showPassword.confirm=!a.showPassword.confirm}},model:{value:a.password.confirm,callback:function(e){a.$set(a.password,"confirm",e)},expression:"password.confirm"}}),t("v-btn",{attrs:{dark:"",color:"primary",block:"",type:"submit"},on:{click:function(e){return e.preventDefault(),a.changePassword.apply(null,arguments)}}},[a._v(" Save "),t("v-icon",{attrs:{right:""}},[a._v("mdi-content-save")])],1)],1),t("v-alert",{staticClass:"mt-3",attrs:{value:"changePassword"==a.alertPlace,type:a.alertType,dense:"",outlined:""}},[a._v(" "+a._s(a.alertMsg)+" ")])],1)],1),t("v-tab-item",{attrs:{transition:"fade-transition","reverse-transition":"fade-transition"}},[t("v-card",{attrs:{tile:"",elevation:"0"}},[t("v-form",{ref:"nameForm",staticClass:"pa-5",attrs:{"lazy-validation":""},on:{submit:a.changeNickname},model:{value:a.nameForm,callback:function(e){a.nameForm=e},expression:"nameForm"}},[t("v-text-field",{attrs:{label:"New Nickname",rules:[function(a){return!!a||"Please enter new nickname."}],outlined:""},model:{value:a.name,callback:function(e){a.name=e},expression:"name"}}),t("v-btn",{attrs:{dark:"",color:"primary",block:"",type:"submit"},on:{click:function(e){return e.preventDefault(),a.changeNickname.apply(null,arguments)}}},[a._v(" Save "),t("v-icon",{attrs:{right:""}},[a._v("mdi-content-save")])],1)],1),t("v-alert",{staticClass:"mt-3",attrs:{value:"changeNickname"==a.alertPlace,type:a.alertType,dense:"",outlined:""}},[a._v(" "+a._s(a.alertMsg)+" ")])],1)],1)],1)},n=[],r=t("5530"),o=(t("b0c0"),t("bc3a")),i=t.n(o),l=t("2f62"),d={name:"Profile",data:function(){return{alertPlace:"",alertType:null,alertMsg:"",passwordForm:!1,showPassword:{oldPassword:!1,newPassword:!1,confirm:!1},password:{oldPassword:"",newPassword:""},nameForm:!1,name:""}},computed:Object(r["a"])(Object(r["a"])({},Object(l["b"])({userdata:function(a){return a.userdata}})),{},{info:function(){if(null==this.userdata.nickname)return[{title:"註冊E-mail",content:""},{title:"暱稱",content:""},{title:"使用者身分",content:""}];var a=[{title:"註冊E-mail",content:this.userdata.email},{title:"暱稱",content:this.userdata.nickname}];return this.userdata.auth<2?a.push({title:"使用者身分",content:"管理員"}):a.push({title:"使用者身分",content:"一般會員"}),a}}),methods:{loadInfo:function(){var a=this,e={url:"/api/personalApp/loadInfo",method:"get"};i()(e).then((function(e){a.$store.commit("loadUserdata",e.data.data)})).catch((function(){a.$store.commit("loadUserdata",{nickname:null})}))},changePassword:function(){var a=this;if(this.$refs.passwordForm.validate()){var e={url:"/api/personalApp/changePassword",method:"put",data:{oldPassword:this.password.oldPassword,newPassword:this.password.newPassword}};i()(e).then((function(e){a.alertPlace="changePassword",a.alertType="success",a.alertMsg=e.data.message})).catch((function(e){a.alertPlace="changePassword",a.alertType="error",a.alertMsg=e.response.data.message}))}},changeNickname:function(){var a=this;if(this.$refs.nameForm.validate()){var e={url:"/api/personalApp/changeNickname",method:"put",data:{newNickname:this.name}};i()(e).then((function(e){a.alertPlace="changeNickname",a.alertType="success",a.alertMsg=e.data.message,a.loadInfo()})).catch((function(e){a.alertPlace="changeNickname",a.alertType="error",a.alertMsg=e.response.data.message}))}}}},c=d,w=t("2877"),u=t("6544"),p=t.n(u),m=t("0798"),f=t("8336"),v=t("b0af"),h=t("62ad"),P=t("a523"),b=t("4bd4"),y=t("132d"),k=t("0fd9"),g=t("71a3"),x=t("c671"),_=t("fe57"),F=t("8654"),C=Object(w["a"])(c,s,n,!1,null,null,null);e["default"]=C.exports;p()(C,{VAlert:m["a"],VBtn:f["a"],VCard:v["a"],VCol:h["a"],VContainer:P["a"],VForm:b["a"],VIcon:y["a"],VRow:k["a"],VTab:g["a"],VTabItem:x["a"],VTabs:_["a"],VTextField:F["a"]})}}]);
//# sourceMappingURL=chunk-2d217357.01ba9ccd.js.map